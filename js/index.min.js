function import$(t,e){var n={}.hasOwnProperty;for(var o in e)n.call(e,o)&&(t[o]=e[o]);return t}!function(){var t,e,n,o;t=function(t){return t.replace(/臺/g,"台")},e=function(t){return null==t&&(t={}),this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.lc={},this.type=t.type,this},e.prototype=import$(Object.create(Object.prototype),{init:function(){var t,e,n,o=this;return t={root:this.root,type:this.type},e=t.root,n=t.type,ld$.fetch("assets/lib/pdmap.tw/"+n+".topo.json",{method:"GET"},{type:"json"}).then(function(t){return o.lc.topo=t,ld$.fetch("assets/lib/pdmap.tw/"+n+".meta.json",{method:"GET"},{type:"json"})}).then(function(t){var n,r;return o.lc.meta=t,o.lc.features=n=topojson.feature(o.lc.topo,o.lc.topo.objects.pdmaptw).features,o.lc.path=r=d3.geoPath().projection(pdmaptw.projection),d3.select(e).append("svg").append("g").selectAll("path").data(n).enter().append("path").attr("d",r)})},fit:function(){var t,e,n,o,r,a,i,c,u,l,p;return t=this.root,e=ld$.find(t,"g",0),(n=d3.select(t).select("svg")).attr("width","100%"),n.attr("height","100%"),o=t.getBoundingClientRect(),r=e.getBBox(),a=[o.width,o.height],i=a[0],c=a[1],20,u=Math.min((i-40)/r.width,(c-40)/r.height),a=[i/2,c/2],l=a[0],p=a[1],e.setAttribute("transform","translate("+l+","+p+") scale("+u+") translate("+(-r.x-r.width/2)+","+(-r.y-r.height/2)+")")}}),pdmaptw.create=function(t){return null==t&&(t={}),new e(t)},n={},n.obj=pdmaptw.create({root:ld$.find(document,"#map",0),type:"county"}),n.obj.init().then(function(){return ld$.fetch("assets/lib/twstat/county/index/index.json",{method:"GET"},{type:"json"})}).then(function(t){var e;return e=new ldView({root:document.body,action:{input:{select:function(){return o(e.get("select").value)}}},handler:{option:{list:function(){return t},handle:function(t){var e,n;return e=t.node,n=t.data,e.innerText=n}}}})}),o=function(e){return null==e&&(e="道路里程長度"),ld$.fetch("assets/lib/twstat/county/index/"+e+".json",{method:"GET"},{type:"json"}).then(function(t){return n.data=t}).then(function(){var e,o,r,a;return(e=n.obj).fit(),o=(r=n.data)[r.length-1],a=Math.max.apply(null,e.lc.meta.name.map(function(t){return o[t]||0})),d3.select(e.root).selectAll("path").attr("fill",function(n){var r,i;return r=t(e.lc.meta.name[n.properties.c]),i=(o[r]||0)/a,d3.interpolateMagma(i)}).attr("stroke",function(){return"#000"}).attr("stroke-width",function(){return 0})})}}();